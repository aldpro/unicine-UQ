<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<ui:composition template="/WEB-INF/template.xhtml">

    <ui:define name="title">#{detallePeliculaBean.pelicula.nombre}</ui:define>

    <ui:define name="content">

        <div>
            <iframe width= "100%" height="500" src="#{detallePeliculaBean.pelicula.urlTrailer}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="true"></iframe>
        </div>
        <div class="col-4 p-3 info-peli">
            <div class="shadow">
                <img class="poster-imagen" src="#{detallePeliculaBean.pelicula.imagenPrincipal}" alt="Poster película"/>

                <h4>Título de la película</h4>
                <p>#{detallePeliculaBean.pelicula.nombre}</p>

                <h4>Reparto</h4>
                <p>#{detallePeliculaBean.pelicula.reparto}</p>

                <h4>Sinopsis</h4>
                <p>#{detallePeliculaBean.pelicula.sinopsis}</p>

                <h4>Géneros</h4>
                <div class="d-inline-block mb-2">
                    <p:repeat value="#{detallePeliculaBean.pelicula.generos}" var="genero">
                        <p:chip label="#{genero}" style="margin-top: 5px; margin-right: 5px" styleClass="mr-2"/>
                    </p:repeat>
                </div>
            </div>
        </div>

        <div class="col-8 info-funciones">
            <div class="shadow">
                <div class="p-3">
                    <div class="">
                        <h:form styleClass="mt-3">
                            <p:repeat value="#{detallePeliculaBean.fechas}" var="fecha" varStatus="f">
                                <p:commandButton styleClass="ui-button-raised ui-button-flat boton-fechas" value="#{detallePeliculaBean.diaSemanas.get(fecha.dayOfWeek.ordinal())} #{fecha.dayOfMonth}/#{fecha.month.ordinal()}/#{fecha.year}" />
                            </p:repeat>
                        </h:form>


                        <div class="mt-3">

                            <p:accordionPanel id="lista-teatros" value="#{detallePeliculaBean.teatros}" var="teatro">
                                <p:tab title="#{teatro.direccion}">
                                    <p:repeat value="${teatro.salas}" var="sala">
                                        <div class="item-func mb-4">
                                            <h:form>
                                                <div class="shadow-sm p-4">
                                                    <p>#{sala.nombre}:</p>
                                                    <p:repeat value="#{sala.funciones}" var="funcion">
                                                        <p:commandButton rendered="#{funcion.pelicula.codigo == detallePeliculaBean.pelicula.codigo}" styleClass="rounded-button" value="#{funcion.horario.hora}" />
                                                    </p:repeat>
                                                </div>
                                            </h:form>
                                        </div>
                                    </p:repeat>
                                </p:tab>
                            </p:accordionPanel>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
</html>